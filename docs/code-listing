#!/usr/bin/env nu
use std assert

def main [] {

}
def "main for" [sourceFile: string, projectFile? :string ] {
    assert ( $sourceFile | path exists) "The source file shoud exist"
    let project_name = ( $projectFile | default ( $sourceFile | path parse --extension .e | upsert extension { 'ecf' } | path join ))
    assert ( $project_name | path exists) "The project file shoud exist"

    ^ec -config $project_name -pretty $sourceFile | expand -i --tabs 2
}